{"version":3,"file":"grid-item.vue.js","sources":["../../src/components/grid-item.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport {\n  ref,\n  reactive,\n  toRef,\n  computed,\n  watch,\n  watchEffect,\n  inject,\n  onBeforeMount,\n  onMounted,\n  onBeforeUnmount\n} from 'vue'\nimport { isNull, nextTickOnce, throttle } from '@vexip-ui/utils'\nimport {\n  LAYOUT_KEY,\n  EMITTER_KEY,\n  setTopLeft,\n  setTopRight,\n  setTransformRtl,\n  setTransform,\n  useNameHelper\n} from '../helpers/common'\nimport { getControlPosition, createCoreData } from '../helpers/draggable'\nimport { getColsFromBreakpoint } from '../helpers/responsive'\nimport { getDocumentDir } from '../helpers/dom'\n\nimport interact from 'interactjs'\n\nconst props = defineProps({\n  isDraggable: {\n    type: Boolean,\n    default: null\n  },\n  isResizable: {\n    type: Boolean,\n    default: null\n  },\n  isBounded: {\n    type: Boolean,\n    default: null\n  },\n  static: {\n    type: Boolean,\n    default: false\n  },\n  minH: {\n    type: Number,\n    default: 1\n  },\n  minW: {\n    type: Number,\n    default: 1\n  },\n  maxH: {\n    type: Number,\n    default: Infinity\n  },\n  maxW: {\n    type: Number,\n    default: Infinity\n  },\n  x: {\n    type: Number,\n    required: true\n  },\n  y: {\n    type: Number,\n    required: true\n  },\n  w: {\n    type: Number,\n    required: true\n  },\n  h: {\n    type: Number,\n    required: true\n  },\n  i: {\n    type: [Number, String],\n    required: true\n  },\n  dragIgnoreFrom: {\n    type: String,\n    default: 'a, button'\n  },\n  dragAllowFrom: {\n    type: String,\n    default: null\n  },\n  resizeIgnoreFrom: {\n    type: String,\n    default: 'a, button'\n  },\n  preserveAspectRatio: {\n    type: Boolean,\n    default: false\n  },\n  dragOption: {\n    type: Object,\n    default: () => ({})\n  },\n  resizeOption: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\nconst emit = defineEmits(['container-resized', 'resize', 'resized', 'move', 'moved'])\n\nconst layout = inject(LAYOUT_KEY)\nconst emitter = inject(EMITTER_KEY)!\n\nif (!layout) {\n  throw new Error('[grid-layout-plus]: missing layout store, GridItem must under a GridLayout.')\n}\n\nconst interactObj = ref<InstanceType<typeof import('@interactjs/types').Interactable> | null>(null)\n\nconst state = reactive({\n  cols: 1,\n  containerWidth: 100,\n  rowHeight: 30,\n  margin: [10, 10],\n  maxRows: Infinity,\n  draggable: null as boolean | null,\n  resizable: null as boolean | null,\n  bounded: null as boolean | null,\n  transformScale: 1,\n  useCssTransforms: true,\n  useStyleCursor: true,\n\n  isDragging: false,\n  dragging: {\n    top: -1,\n    left: -1\n  },\n  isResizing: false,\n  resizing: {\n    width: -1,\n    height: -1\n  },\n  style: {} as Record<string, string>,\n  rtl: false\n})\n\nlet dragEventSet = false\nlet resizeEventSet = false\n\nlet lastX = NaN\nlet lastY = NaN\nlet lastW = NaN\nlet lastH = NaN\n\nlet previousW = -1\nlet previousH = -1\nlet previousX = -1\nlet previousY = -1\n\nlet innerX = props.x\nlet innerY = props.y\nlet innerW = props.w\nlet innerH = props.h\n\nconst wrapper = ref<HTMLElement>()\n\nconst instance = reactive({\n  i: toRef(props, 'i'),\n  state,\n  wrapper,\n  calcXY\n})\n\nfunction updateWidthHandler(width: number) {\n  updateWidth(width)\n}\n\nfunction compactHandler() {\n  compact()\n}\n\nfunction setDraggableHandler(isDraggable: boolean) {\n  if (isNull(props.isDraggable)) {\n    state.draggable = isDraggable\n  }\n}\n\nfunction setResizableHandler(isResizable: boolean) {\n  if (isNull(props.isResizable)) {\n    state.resizable = isResizable\n  }\n}\n\nfunction setBoundedHandler(isBounded: boolean) {\n  if (isNull(props.isBounded)) {\n    state.bounded = isBounded\n  }\n}\n\nfunction setTransformScaleHandler(transformScale: number) {\n  state.transformScale = transformScale\n}\n\nfunction setRowHeightHandler(rowHeight: number) {\n  state.rowHeight = rowHeight\n}\n\nfunction setMaxRowsHandler(maxRows: number) {\n  state.maxRows = maxRows\n}\n\nfunction directionchangeHandler() {\n  state.rtl = getDocumentDir() === 'rtl'\n  compact()\n}\n\nfunction setColNum(colNum: number) {\n  state.cols = Math.floor(colNum)\n}\n\nlayout.increaseItem(instance)\n\nonBeforeMount(() => {\n  state.rtl = getDocumentDir() === 'rtl'\n})\n\nonMounted(() => {\n  if (layout.responsive && layout.lastBreakpoint) {\n    state.cols = getColsFromBreakpoint(layout.lastBreakpoint, layout.cols)\n  } else {\n    state.cols = layout.colNum\n  }\n  state.rowHeight = layout.rowHeight\n  state.containerWidth = layout.width !== null ? layout.width : 100\n  state.margin = layout.margin !== undefined ? layout.margin.map(Number) : [10, 10]\n  state.maxRows = layout.maxRows\n\n  if (isNull(props.isDraggable)) {\n    state.draggable = layout.isDraggable\n  } else {\n    state.draggable = props.isDraggable\n  }\n  if (isNull(props.isResizable)) {\n    state.resizable = layout.isResizable\n  } else {\n    state.resizable = props.isResizable\n  }\n  if (isNull(props.isBounded)) {\n    state.bounded = layout.isBounded\n  } else {\n    state.bounded = props.isBounded\n  }\n  state.transformScale = layout.transformScale\n  state.useCssTransforms = layout.useCssTransforms\n  state.useStyleCursor = layout.useStyleCursor\n\n  watchEffect(() => {\n    innerX = props.x\n    innerY = props.y\n    innerH = props.h\n    innerW = props.w\n    nextTickOnce(createStyle)\n  })\n\n  emitter.on('updateWidth', updateWidthHandler)\n  emitter.on('compact', compactHandler)\n  emitter.on('setDraggable', setDraggableHandler)\n  emitter.on('setResizable', setResizableHandler)\n  emitter.on('setBounded', setBoundedHandler)\n  emitter.on('setTransformScale', setTransformScaleHandler)\n  emitter.on('setRowHeight', setRowHeightHandler)\n  emitter.on('setMaxRows', setMaxRowsHandler)\n  emitter.on('directionchange', directionchangeHandler)\n  emitter.on('setColNum', setColNum)\n})\n\nonBeforeUnmount(() => {\n  emitter.off('updateWidth', updateWidthHandler)\n  emitter.off('compact', compactHandler)\n  emitter.off('setDraggable', setDraggableHandler)\n  emitter.off('setResizable', setResizableHandler)\n  emitter.off('setBounded', setBoundedHandler)\n  emitter.off('setTransformScale', setTransformScaleHandler)\n  emitter.off('setRowHeight', setRowHeightHandler)\n  emitter.off('setMaxRows', setMaxRowsHandler)\n  emitter.off('directionchange', directionchangeHandler)\n  emitter.off('setColNum', setColNum)\n\n  if (interactObj.value) {\n    interactObj.value.unset() // destroy interact intance\n    interactObj.value = null\n  }\n\n  layout.decreaseItem(instance)\n})\n\ndefineExpose({ state, wrapper })\n\nconst isAndroid = navigator.userAgent.toLowerCase().includes('android')\n\nconst resizableAndNotStatic = computed(() => state.resizable && !props.static)\nconst renderRtl = computed(() => (layout.isMirrored ? !state.rtl : state.rtl))\nconst draggableOrResizableAndNotStatic = computed(() => {\n  return (state.draggable || state.resizable) && !props.static\n})\n\nconst nh = useNameHelper('item')\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bm('resizable')]: resizableAndNotStatic.value,\n    [nh.bm('static')]: props.static,\n    [nh.bm('resizing')]: state.isResizing,\n    [nh.bm('dragging')]: state.isDragging,\n    [nh.bm('transform')]: state.useCssTransforms,\n    [nh.bm('rtl')]: renderRtl.value,\n    [nh.bm('no-touch')]: isAndroid && draggableOrResizableAndNotStatic.value\n  }\n})\nconst resizerClass = computed(() => {\n  // return renderRtl.value ? 'vue-resizable-handle vue-rtl-resizable-handle' : 'vue-resizable-handle'\n  return [nh.be('resizer'), renderRtl.value && nh.bem('resizer', 'rtl')].filter(Boolean)\n})\n\nwatch(\n  () => props.isDraggable,\n  value => {\n    state.draggable = value\n  }\n)\nwatch(\n  () => props.static,\n  () => {\n    nextTickOnce(tryMakeDraggable)\n    nextTickOnce(tryMakeResizable)\n  }\n)\nwatch(\n  () => state.draggable,\n  () => {\n    nextTickOnce(tryMakeDraggable)\n  }\n)\nwatch(\n  () => props.isResizable,\n  value => {\n    state.resizable = value\n  }\n)\nwatch(\n  () => props.isBounded,\n  value => {\n    state.bounded = value\n  }\n)\nwatch(\n  () => state.resizable,\n  () => {\n    nextTickOnce(tryMakeResizable)\n  }\n)\nwatch(\n  () => state.rowHeight,\n  () => {\n    nextTickOnce(createStyle)\n    nextTickOnce(emitContainerResized)\n  }\n)\nwatch([() => state.cols, () => state.containerWidth], () => {\n  nextTickOnce(tryMakeResizable)\n  nextTickOnce(createStyle)\n  nextTickOnce(emitContainerResized)\n})\nwatch([() => props.minH, () => props.maxH, () => props.minW, () => props.maxW], () => {\n  nextTickOnce(tryMakeResizable)\n})\nwatch(renderRtl, () => {\n  nextTickOnce(tryMakeResizable)\n  nextTickOnce(createStyle)\n})\nwatch([() => layout.margin, () => layout.margin[0], () => layout.margin[1]], () => {\n  const margin = layout.margin\n\n  if (!margin || (margin[0] === state.margin[0] && margin[1] === state.margin[1])) {\n    return\n  }\n\n  state.margin = margin.map(Number)\n  nextTickOnce(createStyle)\n  nextTickOnce(emitContainerResized)\n})\n\nfunction createStyle() {\n  if (props.x + props.w > state.cols) {\n    innerX = 0\n    innerW = props.w > state.cols ? state.cols : props.w\n  } else {\n    innerX = props.x\n    innerW = props.w\n  }\n\n  const pos = calcPosition(innerX, innerY, innerW, innerH)\n\n  if (state.isDragging) {\n    pos.top = state.dragging.top\n    // Add rtl support\n    if (renderRtl.value) {\n      pos.right = state.dragging.left\n    } else {\n      pos.left = state.dragging.left\n    }\n  }\n  if (state.isResizing) {\n    pos.width = state.resizing.width\n    pos.height = state.resizing.height\n  }\n\n  let style\n  // CSS Transforms support (default)\n  if (state.useCssTransforms) {\n    // Add rtl support\n    if (renderRtl.value) {\n      style = setTransformRtl(pos.top, pos.right!, pos.width, pos.height)\n    } else {\n      style = setTransform(pos.top, pos.left!, pos.width, pos.height)\n    }\n  } else {\n    // top,left (slow)\n    // Add rtl support\n    if (renderRtl.value) {\n      style = setTopRight(pos.top, pos.right!, pos.width, pos.height)\n    } else {\n      style = setTopLeft(pos.top, pos.left!, pos.width, pos.height)\n    }\n  }\n\n  state.style = style\n}\n\nfunction emitContainerResized() {\n  // this.style has width and height with trailing 'px'. The\n  // resized event is without them\n  const styleProps: Record<string, string> = {}\n  for (const prop of ['width', 'height']) {\n    const val = state.style[prop]\n    const matches = val.match(/^(\\d+)px$/)\n    if (!matches) {\n      return\n    }\n    styleProps[prop] = matches[1]\n  }\n  emit('container-resized', props.i, props.h, props.w, styleProps.height, styleProps.width)\n}\n\nfunction handleResize(event: MouseEvent) {\n  if (props.static) return\n\n  const type = event.type\n  if (\n    (type === 'resizestart' && state.isResizing) ||\n    (type !== 'resizestart' && !state.isResizing)\n  ) {\n    return\n  }\n\n  const position = getControlPosition(event)\n  // Get the current drag point from the event. This is used as the offset.\n  if (isNull(position)) return // not possible but satisfies flow\n\n  const { x, y } = position\n  const newSize = { width: 0, height: 0 }\n  let pos\n  switch (type) {\n    case 'resizestart': {\n      tryMakeResizable()\n      previousW = innerW\n      previousH = innerH\n      pos = calcPosition(innerX, innerY, innerW, innerH)\n      newSize.width = pos.width\n      newSize.height = pos.height\n      state.resizing = newSize\n      state.isResizing = true\n      break\n    }\n    case 'resizemove': {\n      const coreEvent = createCoreData(lastW, lastH, x, y)\n      if (renderRtl.value) {\n        newSize.width = state.resizing.width - coreEvent.deltaX / state.transformScale\n      } else {\n        newSize.width = state.resizing.width + coreEvent.deltaX / state.transformScale\n      }\n      newSize.height = state.resizing.height + coreEvent.deltaY / state.transformScale\n      state.resizing = newSize\n      break\n    }\n    case 'resizeend': {\n      pos = calcPosition(innerX, innerY, innerW, innerH)\n      newSize.width = pos.width\n      newSize.height = pos.height\n\n      state.resizing = { width: -1, height: -1 }\n      state.isResizing = false\n      break\n    }\n  }\n\n  // Get new WH\n  pos = calcWH(newSize.height, newSize.width)\n  if (pos.w < props.minW) {\n    pos.w = props.minW\n  }\n  if (pos.w > props.maxW) {\n    pos.w = props.maxW\n  }\n  if (pos.h < props.minH) {\n    pos.h = props.minH\n  }\n  if (pos.h > props.maxH) {\n    pos.h = props.maxH\n  }\n\n  if (pos.h < 1) {\n    pos.h = 1\n  }\n  if (pos.w < 1) {\n    pos.w = 1\n  }\n\n  lastW = x\n  lastH = y\n\n  if (innerW !== pos.w || innerH !== pos.h) {\n    emit('resize', props.i, pos.h, pos.w, newSize.height, newSize.width)\n  }\n  if (event.type === 'resizeend' && (previousW !== innerW || previousH !== innerH)) {\n    emit('resized', props.i, pos.h, pos.w, newSize.height, newSize.width)\n  }\n  emitter.emit('resizeEvent', event.type, props.i, innerX, innerY, pos.h, pos.w)\n}\n\nfunction handleDrag(event: MouseEvent) {\n  if (props.static || state.isResizing) return\n\n  const type = event.type\n  if ((type === 'dragstart' && state.isDragging) || (type !== 'dragstart' && !state.isDragging)) {\n    return\n  }\n\n  const position = getControlPosition(event)\n\n  // Get the current drag point from the event. This is used as the offset.\n  if (isNull(position)) return // not possible but satisfies flow\n  const { x, y } = position\n  const target = event.target as HTMLElement\n\n  if (!target.offsetParent) return\n\n  // let shouldUpdate = false;\n  const newPosition = { top: 0, left: 0 }\n  switch (type) {\n    case 'dragstart': {\n      previousX = innerX\n      previousY = innerY\n\n      const parentRect = target.offsetParent.getBoundingClientRect()\n      const clientRect = target.getBoundingClientRect()\n\n      const cLeft = clientRect.left / state.transformScale\n      const pLeft = parentRect.left / state.transformScale\n      const cRight = clientRect.right / state.transformScale\n      const pRight = parentRect.right / state.transformScale\n      const cTop = clientRect.top / state.transformScale\n      const pTop = parentRect.top / state.transformScale\n\n      if (renderRtl.value) {\n        newPosition.left = (cRight - pRight) * -1\n      } else {\n        newPosition.left = cLeft - pLeft\n      }\n      newPosition.top = cTop - pTop\n      state.dragging = newPosition\n      state.isDragging = true\n      break\n    }\n    case 'dragmove': {\n      const coreEvent = createCoreData(lastX, lastY, x, y)\n      // Add rtl support\n      if (renderRtl.value) {\n        newPosition.left = state.dragging.left - coreEvent.deltaX / state.transformScale\n      } else {\n        newPosition.left = state.dragging.left + coreEvent.deltaX / state.transformScale\n      }\n      newPosition.top = state.dragging.top + coreEvent.deltaY / state.transformScale\n      if (state.bounded) {\n        const bottomBoundary =\n          target.offsetParent.clientHeight -\n          calcGridItemWHPx(props.h, state.rowHeight, state.margin[1])\n        newPosition.top = clamp(newPosition.top, 0, bottomBoundary)\n        const colWidth = calcColWidth()\n        const rightBoundary =\n          state.containerWidth - calcGridItemWHPx(props.w, colWidth, state.margin[0])\n        newPosition.left = clamp(newPosition.left, 0, rightBoundary)\n      }\n\n      state.dragging = newPosition\n      break\n    }\n    case 'dragend': {\n      const parentRect = target.offsetParent.getBoundingClientRect()\n      const clientRect = target.getBoundingClientRect()\n\n      const cLeft = clientRect.left / state.transformScale\n      const pLeft = parentRect.left / state.transformScale\n      const cRight = clientRect.right / state.transformScale\n      const pRight = parentRect.right / state.transformScale\n      const cTop = clientRect.top / state.transformScale\n      const pTop = parentRect.top / state.transformScale\n\n      // Add rtl support\n      if (renderRtl.value) {\n        newPosition.left = (cRight - pRight) * -1\n      } else {\n        newPosition.left = cLeft - pLeft\n      }\n      newPosition.top = cTop - pTop\n      state.dragging = { top: -1, left: -1 }\n      state.isDragging = false\n      break\n    }\n  }\n\n  // Get new XY\n  let pos\n  if (renderRtl.value) {\n    pos = calcXY(newPosition.top, newPosition.left)\n  } else {\n    pos = calcXY(newPosition.top, newPosition.left)\n  }\n\n  lastX = x\n  lastY = y\n\n  if (innerX !== pos.x || innerY !== pos.y) {\n    emit('move', props.i, pos.x, pos.y)\n  }\n  if (event.type === 'dragend' && (previousX !== innerX || previousY !== innerY)) {\n    emit('moved', props.i, pos.x, pos.y)\n  }\n  emitter.emit('dragEvent', event.type, props.i, pos.x, pos.y, innerH, innerW)\n}\n\nfunction calcPosition(x: number, y: number, w: number, h: number) {\n  const colWidth = calcColWidth()\n  // add rtl support\n  let out\n  if (renderRtl.value) {\n    out = {\n      right: Math.round(colWidth * x + (x + 1) * state.margin[0]),\n      top: Math.round(state.rowHeight * y + (y + 1) * state.margin[1]),\n      // 0 * Infinity === NaN, which causes problems with resize constraints;\n      // Fix this if it occurs.\n      // Note we do it here rather than later because Math.round(Infinity) causes depot\n      width: w === Infinity ? w : Math.round(colWidth * w + Math.max(0, w - 1) * state.margin[0]),\n      height:\n        h === Infinity ? h : Math.round(state.rowHeight * h + Math.max(0, h - 1) * state.margin[1])\n    }\n  } else {\n    out = {\n      left: Math.round(colWidth * x + (x + 1) * state.margin[0]),\n      top: Math.round(state.rowHeight * y + (y + 1) * state.margin[1]),\n      // 0 * Infinity === NaN, which causes problems with resize constraints;\n      // Fix this if it occurs.\n      // Note we do it here rather than later because Math.round(Infinity) causes depot\n      width: w === Infinity ? w : Math.round(colWidth * w + Math.max(0, w - 1) * state.margin[0]),\n      height:\n        h === Infinity ? h : Math.round(state.rowHeight * h + Math.max(0, h - 1) * state.margin[1])\n    }\n  }\n\n  return out\n}\n\n/**\n * Translate x and y coordinates from pixels to grid units.\n * @param top  Top position (relative to parent) in pixels.\n * @param left Left position (relative to parent) in pixels.\n * @return x and y in grid units.\n */\n// TODO check if this function needs change in order to support rtl.\nfunction calcXY(top: number, left: number) {\n  const colWidth = calcColWidth()\n\n  // left = colWidth * x + margin * (x + 1)\n  // l = cx + m(x+1)\n  // l = cx + mx + m\n  // l - m = cx + mx\n  // l - m = x(c + m)\n  // (l - m) / (c + m) = x\n  // x = (left - margin) / (coldWidth + margin)\n  let x = Math.round((left - state.margin[0]) / (colWidth + state.margin[0]))\n  let y = Math.round((top - state.margin[1]) / (state.rowHeight + state.margin[1]))\n\n  // Capping\n  x = Math.max(Math.min(x, state.cols - innerW), 0)\n  y = Math.max(Math.min(y, state.maxRows - innerH), 0)\n\n  return { x, y }\n}\n\nfunction calcColWidth() {\n  return (state.containerWidth - state.margin[0] * (state.cols + 1)) / state.cols\n}\n\nfunction calcGridItemWHPx(gridUnits: number, colOrRowSize: number, marginPx: number) {\n  // 0 * Infinity === NaN, which causes problems with resize constraints\n  if (!Number.isFinite(gridUnits)) return gridUnits\n  return Math.round(colOrRowSize * gridUnits + Math.max(0, gridUnits - 1) * marginPx)\n}\n\nfunction clamp(num: number, lowerBound: number, upperBound: number) {\n  return Math.max(Math.min(num, upperBound), lowerBound)\n}\n\n/**\n * Given a height and width in pixel values, calculate grid units.\n * @param height Height in pixels.\n * @param width  Width in pixels.\n * @param autoSizeFlag  function autoSize identifier.\n * @return w, h as grid units.\n */\nfunction calcWH(height: number, width: number, autoSizeFlag = false) {\n  const colWidth = calcColWidth()\n\n  // width = colWidth * w - (margin * (w - 1))\n  // ...\n  // w = (width + margin) / (colWidth + margin)\n  let w = Math.round((width + state.margin[0]) / (colWidth + state.margin[0]))\n  let h = 0\n  if (!autoSizeFlag) {\n    h = Math.round((height + state.margin[1]) / (state.rowHeight + state.margin[1]))\n  } else {\n    h = Math.ceil((height + state.margin[1]) / (state.rowHeight + state.margin[1]))\n  }\n\n  // Capping\n  w = Math.max(Math.min(w, state.cols - innerX), 0)\n  h = Math.max(Math.min(h, state.maxRows - innerY), 0)\n  return { w, h }\n}\n\nfunction updateWidth(width: number, colNum?: number) {\n  state.containerWidth = width\n  if (colNum !== undefined && colNum !== null) {\n    state.cols = colNum\n  }\n}\n\nfunction compact() {\n  createStyle()\n}\n\nfunction tryInteract() {\n  if (!interactObj.value && wrapper.value) {\n    interactObj.value = interact(wrapper.value)\n    if (!state.useStyleCursor) {\n      interactObj.value.styleCursor(false)\n    }\n  }\n}\n\nconst throttleDrag = throttle(handleDrag)\n\nfunction tryMakeDraggable() {\n  tryInteract()\n\n  if (!interactObj.value) return\n\n  if (state.draggable && !props.static) {\n    const opts = {\n      ignoreFrom: props.dragIgnoreFrom,\n      allowFrom: props.dragAllowFrom,\n      ...props.dragOption\n    }\n    interactObj.value.draggable(opts)\n\n    if (!dragEventSet) {\n      dragEventSet = true\n      interactObj.value.on('dragstart dragmove dragend', event => {\n        event.type === 'dragmove' ? throttleDrag(event) : handleDrag(event)\n      })\n    }\n  } else {\n    interactObj.value.draggable({ enabled: false })\n  }\n}\n\nconst throttleResize = throttle(handleResize)\n\nfunction tryMakeResizable() {\n  tryInteract()\n\n  if (!interactObj.value) return\n\n  if (state.resizable && !props.static) {\n    const maximum = calcPosition(0, 0, props.maxW, props.maxH)\n    const minimum = calcPosition(0, 0, props.minW, props.minH)\n\n    const opts: Record<string, any> = {\n      edges: {\n        left: false,\n        right: `.${resizerClass.value[0]}`,\n        bottom: `.${resizerClass.value[0]}`,\n        top: false\n      },\n      ignoreFrom: props.resizeIgnoreFrom,\n      restrictSize: {\n        min: {\n          height: minimum.height * state.transformScale,\n          width: minimum.width * state.transformScale\n        },\n        max: {\n          height: maximum.height * state.transformScale,\n          width: maximum.width * state.transformScale\n        }\n      },\n      ...props.resizeOption\n    }\n\n    if (props.preserveAspectRatio) {\n      opts.modifiers = [interact.modifiers.aspectRatio({ ratio: 'preserve' })]\n    }\n\n    interactObj.value.resizable(opts)\n    if (!resizeEventSet) {\n      resizeEventSet = true\n      interactObj.value.on('resizestart resizemove resizeend', event => {\n        event.type === 'resizemove' ? throttleResize(event) : handleResize(event)\n      })\n    }\n  } else {\n    interactObj.value.resizable({ enabled: false })\n  }\n}\n</script>\n\n<template>\n  <section ref=\"wrapper\" :class=\"className\" :style=\"state.style\">\n    <slot></slot>\n    <span v-if=\"resizableAndNotStatic\" :class=\"resizerClass\"></span>\n  </section>\n</template>\n"],"names":["layout","inject","LAYOUT_KEY","emitter","EMITTER_KEY","interactObj","ref","state","reactive","dragEventSet","resizeEventSet","lastX","lastY","lastW","lastH","previousW","previousH","previousX","previousY","innerX","props","innerY","innerW","innerH","wrapper","instance","toRef","calcXY","updateWidthHandler","width","updateWidth","compactHandler","compact","setDraggableHandler","isDraggable","isNull","setResizableHandler","isResizable","setBoundedHandler","isBounded","setTransformScaleHandler","transformScale","setRowHeightHandler","rowHeight","setMaxRowsHandler","maxRows","directionchangeHandler","getDocumentDir","setColNum","colNum","onBeforeMount","onMounted","getColsFromBreakpoint","watchEffect","nextTickOnce","createStyle","onBeforeUnmount","expose","isAndroid","resizableAndNotStatic","computed","renderRtl","draggableOrResizableAndNotStatic","nh","useNameHelper","className","resizerClass","watch","value","tryMakeDraggable","tryMakeResizable","emitContainerResized","margin","pos","calcPosition","style","setTransformRtl","setTransform","setTopRight","setTopLeft","styleProps","prop","matches","emit","handleResize","event","type","position","getControlPosition","x","y","newSize","coreEvent","createCoreData","calcWH","handleDrag","target","newPosition","parentRect","clientRect","cLeft","pLeft","cRight","pRight","cTop","pTop","bottomBoundary","calcGridItemWHPx","clamp","colWidth","calcColWidth","rightBoundary","w","h","out","top","left","gridUnits","colOrRowSize","marginPx","num","lowerBound","upperBound","height","autoSizeFlag","tryInteract","interact","throttleDrag","throttle","opts","throttleResize","maximum","minimum"],"mappings":"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"}